{% extends "layout.html.j2" %}

{% block title %}
    Test Result
{% endblock %}

{% block main %}
<table class="table table-striped">
    <thead>
        <tr>
            <th>Detail</th>
            <th>Value</th>
        </tr>
    </thead>
    <tbody>
        <!-- Profile Image -->
        <tr>
            <td>Photograph</td>
            <td>
                <img src="/static/profile_images/{{ session.user_id }}.jpg" alt="Image not found or uploaded" height="200">
            </td>
        </tr>
        <!-- First Name -->
        <tr>
            <td>First Name</td>
            <td>{{ session.first_name }}</td>
        </tr>
        <!-- Middle Name -->
        <tr>
            <td>Middle Name</td>
            <td>{{ session.middle_name }}</td>
        </tr>
        <!-- Last Name -->
        <tr>
            <td>Last Name</td>
            <td>{{ session.last_name }}</td>
        </tr>
        <!-- Email -->
        <tr>
            <td>Email</td>
            <td>{{ session.email }}</td>
        </tr>
        <!-- Contact -->
        <tr>
            <td>Contact</td>
            <td>{{ session.contact }}</td>
        </tr>
        <!-- Gender -->
        <tr>
            <td>Gender</td>
            <td>
                {% if session.gender == 'M' %}
                Male
                {% else %}
                Female
                {% endif %}
            </td>
        </tr>
        <!-- Date of Birth -->
        <tr>
            <td>Date of Birth</td>
            <td>{{ session.dob }}</td>
        </tr>
        <!-- Number of Questions (Maximum) -->
        <tr>
            <td>Number of Questions (Maximum)</td>
            <td>{{ details['max'] }}</td>
        </tr>
        <!-- Number of Questions (Attempted) -->
        <tr>
            <td>Number of Questions (Attempted)</td>
            <td>{{ details['attempted'] }}</td>
        </tr>
        <!-- Number of Questions (Correct) -->
        <tr>
            <td>Number of Questions (Correct)</td>
            <td>{{ details['correct'] }}</td>
        </tr>
        <!-- Percentage -->
        <tr>
            <td>Percentage</td>
        {% if details['correct'] and details['max'] %}
            <td>{{ "{:.2f}".format(details['correct'] / details['max'] * 100) }} %</td>
        {% else %}
            <td>{{ "{:.2f}".format(0) }} %</td>
        {% endif %}
        </tr>
        <!-- Accuracy -->
        <tr>
            <td>Accuracy</td>
        {% if details['correct'] and details['attempted'] %}
            <td>{{ "{:.2f}".format(details['correct'] / details['attempted'] * 100) }} %</td>
        {% else %}
            <td>{{ "{:.2f}".format(0) }} %</td>
        {% endif %}
        </tr>
        <!-- Test Date & Time -->
        <tr>
            <td>Test Date & Time</td>
            <td>{{ details['start'] }}</td>
        </tr>
    </tbody>
</table>
<!-- <a href="/scorecards/{{ details['id'] }}.pdf" target="_blank">
    View ScoreCard
</a>
<br>
<a href="/scorecards/{{ details['id'] }}.pdf" download="ScoreCard">
    Download ScoreCard
</a> -->
{% endblock %}
